version: "3.9"

services:
  click32_app_1:
    build: .
    container_name: click32_bairro_1
    command: /entrypoint.sh
    env_file:
      - .env_bairro_1
    ports:
      - "8001:8000"
    depends_on:
      - postgres_bairro_1
    networks:
      - net_bairro_1

  postgres_bairro_1:
    image: postgres:16
    container_name: click32_postgres_bairro_1
    restart: unless-stopped
    env_file:
      - .env_bairro_1
    volumes:
      - postgres_data_bairro_1:/var/lib/postgresql/data
    networks:
      - net_bairro_1

  click32_app_2:
    build: .
    container_name: click32_bairro_2
    command: /entrypoint.sh
    env_file:
      - .env_bairro_2
    ports:
      - "8002:8000"
    depends_on:
      - postgres_bairro_2
    networks:
      - net_bairro_2

  postgres_bairro_2:
    image: postgres:16
    container_name: click32_postgres_bairro_2
    restart: unless-stopped
    env_file:
      - .env_bairro_2
    volumes:
      - postgres_data_bairro_2:/var/lib/postgresql/data
    networks:
      - net_bairro_2

networks:
  net_bairro_1:
  net_bairro_2:

volumes:
  postgres_data_bairro_1:
  postgres_data_bairro_2: